(this.webpackJsonpmidk=this.webpackJsonpmidk||[]).push([[0],{39:function(e,n){e.exports={pitchNotation:"Scientific",playMode:{enable:!1,toggle:["CSharp2","DSharp2","ASharp5"]},portal:{C2:null,CSharp2:"escape",D2:"home",DSharp2:null,E2:"end",F2:"tilde",FSharp2:"tab",G2:"control",GSharp2:"capsLock",A2:"alt",ASharp2:"shift",B2:"command",C3:"a",CSharp3:"q",D3:"z",DSharp3:"w",E3:"s",F3:"x",FSharp3:"e",G3:"c",GSharp3:"d",A3:"f",ASharp3:"r",B3:"v",C4:"space",CSharp4:"t",D4:"b",DSharp4:"g",E4:"h",F4:"n",FSharp4:"y",G4:"j",GSharp4:"u",A4:"k",ASharp4:"i",B4:"m",C5:"l",CSharp5:"o",D5:"comma",DSharp5:"p",E5:"dot",F5:"slash",FSharp5:"openBracket",G5:"semicolon",GSharp5:"closeBracket",A5:"quotes",ASharp5:"enter",B5:"backslash",C6:"left",CSharp6:"backspace",D6:"down",DSharp6:"up",E6:"right",F6:"delete",FSharp6:"backspace",G6:"audioVolDown",GSharp6:"audioVolUp",A6:"lightsMonDown",ASharp6:"lightsMonUp",B6:"dash",C7:"equal"},fnPortal:{C2:{D2:"audioPrev",DSharp2:"audioPlay",E2:"audioNext",CSharp3:"f1",D3:"f2",DSharp3:"f3",E3:"f4",F3:"f5",FSharp3:"f6",G3:"f7",GSharp3:"f8",A3:"f9",ASharp3:"f10",B3:"f11",C4:"f12",C6:"tilde",CSharp6:"num1",D6:"num2",DSharp6:"num3",E6:"num4",F6:"num5",FSharp6:"num6",G6:"num7",GSharp6:"num8",A6:"num9",ASharp6:"num0",B6:"pageDown",C7:"pageUp"},CSharp2:{ASharp5:null}}}},42:function(e,n,a){e.exports=a(89)},88:function(e,n,a){},89:function(e,n,a){"use strict";a.r(n);var t,r,o,c=a(0),l=a.n(c),i=a(10),u=a.n(i),p=a(5),h=a(2),d=a(32),f=a.n(d);!function(e){e.Scientific="Scientific",e.Helmholtz="Helmholtz"}(t||(t={})),function(e){e[e.noteOffEvent=128]="noteOffEvent",e[e.noteOnEvent=144]="noteOnEvent",e[e.polyphonicPressure=160]="polyphonicPressure",e[e.controlChange=176]="controlChange",e[e.programChange=192]="programChange",e[e.channelPressure=208]="channelPressure",e[e.pitchBendChange=224]="pitchBendChange"}(r||(r={})),function(e){e[e.C0=12]="C0",e[e.CSharp0=13]="CSharp0",e[e.D0=14]="D0",e[e.DSharp0=15]="DSharp0",e[e.E0=16]="E0",e[e.F0=17]="F0",e[e.FSharp0=18]="FSharp0",e[e.G0=19]="G0",e[e.GSharp0=20]="GSharp0",e[e.A0=21]="A0",e[e.ASharp0=22]="ASharp0",e[e.B0=23]="B0",e[e.C1=24]="C1",e[e.CSharp1=25]="CSharp1",e[e.D1=26]="D1",e[e.DSharp1=27]="DSharp1",e[e.E1=28]="E1",e[e.F1=29]="F1",e[e.FSharp1=30]="FSharp1",e[e.G1=31]="G1",e[e.GSharp1=32]="GSharp1",e[e.A1=33]="A1",e[e.ASharp1=34]="ASharp1",e[e.B1=35]="B1",e[e.C2=36]="C2",e[e.CSharp2=37]="CSharp2",e[e.D2=38]="D2",e[e.DSharp2=39]="DSharp2",e[e.E2=40]="E2",e[e.F2=41]="F2",e[e.FSharp2=42]="FSharp2",e[e.G2=43]="G2",e[e.GSharp2=44]="GSharp2",e[e.A2=45]="A2",e[e.ASharp2=46]="ASharp2",e[e.B2=47]="B2",e[e.C3=48]="C3",e[e.CSharp3=49]="CSharp3",e[e.D3=50]="D3",e[e.DSharp3=51]="DSharp3",e[e.E3=52]="E3",e[e.F3=53]="F3",e[e.FSharp3=54]="FSharp3",e[e.G3=55]="G3",e[e.GSharp3=56]="GSharp3",e[e.A3=57]="A3",e[e.ASharp3=58]="ASharp3",e[e.B3=59]="B3",e[e.C4=60]="C4",e[e.CSharp4=61]="CSharp4",e[e.D4=62]="D4",e[e.DSharp4=63]="DSharp4",e[e.E4=64]="E4",e[e.F4=65]="F4",e[e.FSharp4=66]="FSharp4",e[e.G4=67]="G4",e[e.GSharp4=68]="GSharp4",e[e.A4=69]="A4",e[e.ASharp4=70]="ASharp4",e[e.B4=71]="B4",e[e.C5=72]="C5",e[e.CSharp5=73]="CSharp5",e[e.D5=74]="D5",e[e.DSharp5=75]="DSharp5",e[e.E5=76]="E5",e[e.F5=77]="F5",e[e.FSharp5=78]="FSharp5",e[e.G5=79]="G5",e[e.GSharp5=80]="GSharp5",e[e.A5=81]="A5",e[e.ASharp5=82]="ASharp5",e[e.B5=83]="B5",e[e.C6=84]="C6",e[e.CSharp6=85]="CSharp6",e[e.D6=86]="D6",e[e.DSharp6=87]="DSharp6",e[e.E6=88]="E6",e[e.F6=89]="F6",e[e.FSharp6=90]="FSharp6",e[e.G6=91]="G6",e[e.GSharp6=92]="GSharp6",e[e.A6=93]="A6",e[e.ASharp6=94]="ASharp6",e[e.B6=95]="B6",e[e.C7=96]="C7",e[e.CSharp7=97]="CSharp7",e[e.D7=98]="D7",e[e.DSharp7=99]="DSharp7",e[e.E7=100]="E7",e[e.F7=101]="F7",e[e.FSharp7=102]="FSharp7",e[e.G7=103]="G7",e[e.GSharp7=104]="GSharp7",e[e.A7=105]="A7",e[e.ASharp7=106]="ASharp7",e[e.B7=107]="B7",e[e.C8=108]="C8",e[e.CSharp8=109]="CSharp8",e[e.D8=110]="D8",e[e.DSharp8=111]="DSharp8",e[e.E8=112]="E8",e[e.F8=113]="F8",e[e.FSharp8=114]="FSharp8",e[e.G8=115]="G8",e[e.GSharp8=116]="GSharp8",e[e.A8=117]="A8",e[e.ASharp8=118]="ASharp8",e[e.B8=119]="B8",e[e.C9=120]="C9"}(o||(o={}));var s=a(11),m=a.n(s),S=function(e,n,a){null===e||void 0===e||e.addListener("noteon","all",(function(e){return null===n||void 0===n?void 0:n(e.note.number)})),null===e||void 0===e||e.addListener("noteoff","all",(function(e){return null===a||void 0===a?void 0:a(e.note.number)}))},b=a(92),v=a(93),g=a(94),C=a(95),E=a(96),F=a(97),x=a(98),A=a(3),D=a(4),G=a(41),w=a(35);function k(){var e=Object(A.a)(["\n  margin: auto 12px;\n  color: ",";\n  transition: all .3s;\n"]);return k=function(){return e},e}function j(){var e=Object(A.a)(["\n  border-color: #fff;\n  &.ant-switch-checked {\n    background-color: var(--active-note-color);\n  }\n"]);return j=function(){return e},e}function O(){var e=Object(A.a)(["\n  position: fixed;\n  top: calc(50vh - ","px - 80px);\n  left: 0;\n  padding: 16px;\n  color: #fff;\n"]);return O=function(){return e},e}function y(){var e=Object(A.a)(["\n  position: absolute;\n  bottom: 0;\n  margin: 16px 10px auto;\n  pointer-events: none;\n"]);return y=function(){return e},e}function B(){var e=Object(A.a)(["\n  margin: 0 10px;\n\n  .ReactPiano__Key--natural {\n    background: var(--base-note-color);\n    border: none;\n    box-shadow: 0 0 0 1px var(--global-background);\n  }\n\n  .ReactPiano__Key--accidental {\n    height: 64%;\n    border: none;\n    background: var(--sharp-note-color);\n  }\n\n  .ReactPiano__Key--active {\n    border: none;\n    \n    &.ReactPiano__Key--natural {\n      height: unset;\n      background: var(--active-note-color);\n    }\n     \n    &.ReactPiano__Key--accidental {\n      background: var(--piano-header-background);\n    }    \n\n    &.ReactPiano__Key--natural, &.ReactPiano__Key--accidental {\n      .ReactPiano__NoteLabelContainer kbd {\n        color: var(--sharp-note-text-color);\n        text-shadow: 0 0 0 var(--sharp-note-text-color);\n        border: 1px solid var(--kbd-border-color);\n        box-shadow: 0 1.5px 0 var(--kbd-border-color);\n      }\n    }\n  }\n\n  .ReactPiano__Key {\n    border-top: 10px solid var(--piano-header-background);\n  }\n"]);return B=function(){return e},e}function P(){var e=Object(A.a)(["\n  color: transparent;\n  width: 14px;\n  overflow-x: hidden;\n"]);return P=function(){return e},e}function M(){var e=Object(A.a)(["\n  color: var(--active-note-color);\n  text-shadow: 0 0 0 var(--active-note-color);\n  border-color: var(--active-note-color);\n  box-shadow: 0 1.5px 0 var(--active-note-color);\n"]);return M=function(){return e},e}function R(){var e=Object(A.a)(['\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  height: 20px;\n  margin-top: 14px;\n  padding: 1px 5px;\n  min-width: 12px;\n  line-height: 20px;\n  text-align: center;\n  vertical-align: middle;\n  background-color: var(--kbd-background);\n  font-family: "SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace";\n  border-radius: 3px;\n  border: 1px solid var(--kbd-border-color);\n  box-shadow: 0 1.5px 0 var(--kbd-border-color);\n']);return R=function(){return e},e}function L(){var e=Object(A.a)(["\n  margin-bottom: 12px;\n  text-align: center;\n  font-size: 14px;\n  user-select: none;\n\n  .anticon svg {\n    font-size: 16px;\n  }\n"]);return L=function(){return e},e}function _(){var e=Object(A.a)(["\n  color: var(--base-note-text-color);\n  text-shadow: 0 0 0 var(--base-note-text-color);\n"]);return _=function(){return e},e}function N(){var e=Object(A.a)(["\n  padding-bottom: 8px;\n  color: var(--sharp-note-text-color);\n  text-shadow: 0 0 0 var(--sharp-note-text-color);\n"]);return N=function(){return e},e}function K(){var e=Object(A.a)(["\n  padding: 0 0 2px 4px;\n  text-align: left;\n  color: var(--base-note-name-color);\n  font-size: 14px;\n  user-select: none;\n\n  sub {\n    position: absolute;\n    bottom: 0;\n  }\n"]);return K=function(){return e},e}function z(){var e=Object(A.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  justify-content: center;\n"]);return z=function(){return e},e}function V(){var e=Object(A.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return V=function(){return e},e}var U,W,q=D.a.div(V()),H=D.a.div(z()),T=D.a.div(K()),I=D.a.div(N()),J=D.a.div(_()),Q=D.a.div(L()),X=D.a.kbd(R()),Y=Object(D.a)(X)(M()),Z=D.a.span(P()),$=Object(D.a)(w.a)(B()),ee=D.a.div(y()),ne=D.a.div(O(),210),ae=Object(D.a)(G.a)(j()),te=D.a.span(k(),(function(e){return e.activated?"#fff":"#999"})),re={backspace:"\u232b",delete:"\u2326",enter:"\u21a9\ufe0e",tab:"\u21e5",escape:"Esc",up:l.a.createElement(b.a,null),down:l.a.createElement(v.a,null),right:l.a.createElement(g.a,null),left:l.a.createElement(C.a,null),home:"Home",end:"End",pageUp:"Page\u21de",pageDown:"Page\u21df",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",f13:"F13",f14:"F14",f15:"F15",f16:"F16",f17:"F17",f18:"F18",f19:"F19",f20:"F20",f21:"F21",f22:"F22",f23:"F23",f24:"F24",capsLock:"\u21ea",command:"\u2318",alt:"\u2325",rightAlt:"\u2325",control:"\u2303",leftControl:"\u2303",rightControl:"\u2303",shift:"\u21e7",rightShift:"\u21e7",space:"Space",printScreen:"Screen",insert:"Insert",menu:"Menu",audioMute:l.a.createElement(Z,{role:"img"},"\ud83d\udd0a"),audioVolDown:l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,{role:"img"},"\ud83d\udd0a"),"-"),audioVolUp:l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,{role:"img"},"\ud83d\udd0a"),"+"),audioPlay:l.a.createElement(E.a,null),audioStop:l.a.createElement(E.a,null),audioPause:l.a.createElement(E.a,null),audioPrev:l.a.createElement(F.a,null),audioNext:l.a.createElement(x.a,null),audioRewind:"Rewind",audioForward:"Forward",audioRepeat:"\u2394",audioRandom:"Random",numpadLock:"NumLock",num1:"1",num2:"2",num3:"3",num4:"4",num5:"5",num6:"6",num7:"7",num8:"8",num9:"9",num0:"0",numpad0:"0",numpad1:"1",numpad2:"2",numpad3:"3",numpad4:"4",numpad5:"5",numpad6:"6",numpad7:"7",numpad8:"8",numpad9:"9",numpadPlus:"+",numpadSub:"-",numpadMulti:"*",numpadDiv:"/",numpadDot:".",lightsMonUp:l.a.createElement(Z,{role:"img"},"\ud83d\udd06"),lightsMonDown:l.a.createElement(Z,{role:"img"},"\ud83d\udd05"),lightsKbdToggle:"Toggle",lightsKbdUp:l.a.createElement(Z,{role:"img"},"\u2328\ufe0f\ud83d\udd06"),lightsKbdDown:l.a.createElement(Z,{role:"img"},"\u2328\ufe0f\ud83d\udd05"),a:"A",b:"B",c:"C",d:"D",e:"E",f:"F",g:"G",h:"H",i:"I",j:"J",k:"K",l:"L",m:"M",n:"N",o:"O",p:"P",q:"Q",r:"R",s:"S",t:"T",u:"U",v:"V",w:"W",x:"X",y:"Y",z:"Z",tilde:"`",dash:"-",equal:"=",comma:",",dot:".",slash:"/",semicolon:";",quotes:"'",openBracket:"[",closeBracket:"]",backslash:"\\",fn:"Fn",NULL:""},oe=(a(31),function(e){var n=e.noteCode,a=o[n].replace("Sharp","#");return l.a.createElement(T,null,l.a.createElement("span",null,a))}),ce=function(e){var n=e.noteCode,a=e.portal,t=e.fnPortal,r=o[n],c=re[a[r]],i=new Map(Object.values(t).map((function(e){return Object.entries(e)})).reduce((function(e,n){return[].concat(Object(h.a)(e),Object(h.a)(n))}),[]).filter((function(e){return Object(p.a)(e,2)[1]}))),u=re[i.get(r)];return u?l.a.createElement(Q,null,l.a.createElement("div",null,l.a.createElement(Y,null,u)),c?l.a.createElement(X,null,c):null):c?t[r]&&Object.values(t[r]).filter(Boolean).length>0?l.a.createElement(Q,null,l.a.createElement(Y,null,c)):l.a.createElement(Q,null,l.a.createElement(X,null,c)):null},le=function(e){var n=e.noteCode,a=e.isAccidental,t=e.portal,r=e.fnPortal,o=e.isPlayMode,c=l.a.createElement(oe,{noteCode:n}),i=a?I:J;return l.a.createElement(i,null,!o&&l.a.createElement(ce,{noteCode:n,portal:t,fnPortal:r}),a?null:c)},ie=a(40).a.Flow,ue=ie.Formatter,pe=ie.Renderer,he=ie.Stave,de=ie.StaveNote,fe=ie.Beam;!function(e){e[e.CANVAS=1]="CANVAS",e[e.RAPHAEL=2]="RAPHAEL",e[e.SVG=3]="SVG",e[e.VML=4]="VML"}(U||(U={})),function(e){e.treble="treble",e.bass="bass"}(W||(W={}));var se=function(e){return o[e].replace(/(Sharp)?(\d)/,"/$2")},me=function(e,n){return Array.from({length:n-e+1}).map((function(n,a){return a+e})).filter((function(e){return!o[e].includes("Sharp")})).map((function(e){return new de({clef:e<o.C4?W.bass:W.treble,keys:[se(e)],duration:"4q"})}))},Se=function(e){var n=e.className,a=e.width,t=e.noteRange,r=t.first,i=t.last,u=e.noteKeyWidth,p=Object(c.useRef)(),h=me(o.C4,i),d=me(r,o.B3);Object(c.useEffect)((function(){var e=new pe(p.current,U.SVG);f(e)}),[]);var f=function(e){e.resize(a,140);var n=e.getContext(),t=new he(10,20,d.length*u-10).addClef(W.bass).setContext(n);t.draw();var r=fe.generateBeams(d);ue.FormatAndDraw(n,t,d),r.forEach((function(e){return e.setContext(n).draw()}));var o=new he(d.length*u+10,20,h.length*u-10).addClef(W.treble).setContext(n);o.draw();var c=fe.generateBeams(h);ue.FormatAndDraw(n,o,h),c.forEach((function(e){return e.setContext(n).draw()}))};return l.a.createElement(ee,null,l.a.createElement("div",{className:n,ref:p}))},be=a(39),ve=a.n(be),ge=(a(86),a(87),a(88),function(){}),Ce=ve.a,Ee=Ce.playMode,Fe=Ce.portal,xe=Ce.fnPortal,Ae=new Set(Ee.toggle.map((function(e){return o[e]}))),De=Object.keys(Fe).map((function(e){return o[e]})),Ge={first:Math.min.apply(Math,Object(h.a)(De)),last:Math.max.apply(Math,Object(h.a)(De))},we=70*function(e,n){for(var a=0,t=e;t<=n;t++)o[t].includes("Sharp")||(a+=1);return a}(Ge.first,Ge.last),ke=function(e){return l.a.createElement(ne,null,l.a.createElement(te,{activated:!e.checked},"Control Mode"),l.a.createElement(ae,e),l.a.createElement(te,{activated:e.checked},"Play Mode"))},je=document.getElementById("root");u.a.render(l.a.createElement((function(){var e=Object(c.useRef)(Ee.enable),n=Object(c.useState)(new Set),a=Object(p.a)(n,2),t=a[0],r=a[1];Object(c.useEffect)((function(){!function(e){var n=new Set,a=function(a){n.add(a),e(n,!0)},t=function(a){n.delete(a),e(n,!1)},r=function(){return m.a.inputs[0]},o=function(e){console.log("WebMidi: connected()","event",e),"input"===e.port.type&&S(r(),a,t)},c=function(e){if(console.log("WebMidi: disconnected()","event",e),"input"===e.port.type){var n=r();null===n||void 0===n||n.removeListener("noteon"),null===n||void 0===n||n.removeListener("noteoff")}};m.a.enable((function(e){if(e)console.log("WebMidi could not be enabled.",e);else{var n=r();n?(console.log("WebMidi enabled."),S(n,a,t)):(console.log("WebMidi midi input not found"),m.a.addListener("connected",o)),m.a.addListener("disconnected",c)}}))}((function(n,a){var t,o;a&&(o=Ae,(t=n).size===o.size&&t.size===new Set([].concat(Object(h.a)(t),Object(h.a)(o))).size)&&(e.current=!e.current),r(new Set(Object(h.a)(n)))}))}),[]);var o=Object(c.useCallback)((function(n){var a=n.midiNumber,t=n.isAccidental;return l.a.createElement(le,{noteCode:a,isAccidental:t,portal:Fe,fnPortal:xe,isPlayMode:e.current})}),[e.current]);return l.a.createElement(q,null,l.a.createElement(f.a,{url:"https://github.com/zthxxx/midk",backgroundColor:"white",color:"var(--global-background)",svgStyle:{position:"fixed"}}),l.a.createElement(ke,{checked:e.current,onChange:function(n){console.log("PlayModeSwitch",n),e.current=n,r(new Set)}}),l.a.createElement(H,null,l.a.createElement($,{noteRange:Ge,width:we,activeNotes:Object(h.a)(t),playNote:ge,stopNote:ge,disabled:!1,keyWidthToHeight:1/6,renderNoteLabel:o}),e.current&&l.a.createElement(Se,{width:we,noteRange:Ge,noteKeyWidth:70})))})),je)}},[[42,1,2]]]);
//# sourceMappingURL=main.65a80caa.chunk.js.map