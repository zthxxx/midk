(this.webpackJsonpmidk=this.webpackJsonpmidk||[]).push([[0],{39:function(n,e){n.exports={pitchNotation:"Scientific",playMode:{enable:!1,toggle:["CSharp2","DSharp2","ASharp5"]},portal:{C2:null,CSharp2:"escape",D2:"home",DSharp2:null,E2:"end",F2:"tilde",FSharp2:"tab",G2:"control",GSharp2:"capsLock",A2:"alt",ASharp2:"shift",B2:"command",C3:"a",CSharp3:"q",D3:"z",DSharp3:"w",E3:"s",F3:"x",FSharp3:"e",G3:"c",GSharp3:"d",A3:"f",ASharp3:"r",B3:"v",C4:"space",CSharp4:"t",D4:"b",DSharp4:"g",E4:"h",F4:"n",FSharp4:"y",G4:"j",GSharp4:"u",A4:"k",ASharp4:"i",B4:"m",C5:"l",CSharp5:"o",D5:"comma",DSharp5:"p",E5:"dot",F5:"slash",FSharp5:"openBracket",G5:"semicolon",GSharp5:"closeBracket",A5:"quotes",ASharp5:"enter",B5:"backslash",C6:"left",CSharp6:"backspace",D6:"down",DSharp6:"up",E6:"right",F6:"delete",FSharp6:"backspace",G6:"audioVolDown",GSharp6:"audioVolUp",A6:"lightsMonDown",ASharp6:"lightsMonUp",B6:"dash",C7:"equal"},fnPortal:{C2:{D2:"audioPrev",DSharp2:"audioPlay",E2:"audioNext",CSharp3:"f1",D3:"f2",DSharp3:"f3",E3:"f4",F3:"f5",FSharp3:"f6",G3:"f7",GSharp3:"f8",A3:"f9",ASharp3:"f10",B3:"f11",C4:"f12",C6:"tilde",CSharp6:"num1",D6:"num2",DSharp6:"num3",E6:"num4",F6:"num5",FSharp6:"num6",G6:"num7",GSharp6:"num8",A6:"num9",ASharp6:"num0",B6:"pageDown",C7:"pageUp"},CSharp2:{ASharp5:null}}}},42:function(n,e,a){n.exports=a(89)},88:function(n,e,a){},89:function(n,e,a){"use strict";a.r(e);var t,r,o,c=a(0),l=a.n(c),i=a(10),u=a.n(i),p=a(5),h=a(2),d=a(32),s=a.n(d);!function(n){n.Scientific="Scientific",n.Helmholtz="Helmholtz"}(t||(t={})),function(n){n[n.noteOffEvent=128]="noteOffEvent",n[n.noteOnEvent=144]="noteOnEvent",n[n.polyphonicPressure=160]="polyphonicPressure",n[n.controlChange=176]="controlChange",n[n.programChange=192]="programChange",n[n.channelPressure=208]="channelPressure",n[n.pitchBendChange=224]="pitchBendChange"}(r||(r={})),function(n){n[n.C0=12]="C0",n[n.CSharp0=13]="CSharp0",n[n.D0=14]="D0",n[n.DSharp0=15]="DSharp0",n[n.E0=16]="E0",n[n.F0=17]="F0",n[n.FSharp0=18]="FSharp0",n[n.G0=19]="G0",n[n.GSharp0=20]="GSharp0",n[n.A0=21]="A0",n[n.ASharp0=22]="ASharp0",n[n.B0=23]="B0",n[n.C1=24]="C1",n[n.CSharp1=25]="CSharp1",n[n.D1=26]="D1",n[n.DSharp1=27]="DSharp1",n[n.E1=28]="E1",n[n.F1=29]="F1",n[n.FSharp1=30]="FSharp1",n[n.G1=31]="G1",n[n.GSharp1=32]="GSharp1",n[n.A1=33]="A1",n[n.ASharp1=34]="ASharp1",n[n.B1=35]="B1",n[n.C2=36]="C2",n[n.CSharp2=37]="CSharp2",n[n.D2=38]="D2",n[n.DSharp2=39]="DSharp2",n[n.E2=40]="E2",n[n.F2=41]="F2",n[n.FSharp2=42]="FSharp2",n[n.G2=43]="G2",n[n.GSharp2=44]="GSharp2",n[n.A2=45]="A2",n[n.ASharp2=46]="ASharp2",n[n.B2=47]="B2",n[n.C3=48]="C3",n[n.CSharp3=49]="CSharp3",n[n.D3=50]="D3",n[n.DSharp3=51]="DSharp3",n[n.E3=52]="E3",n[n.F3=53]="F3",n[n.FSharp3=54]="FSharp3",n[n.G3=55]="G3",n[n.GSharp3=56]="GSharp3",n[n.A3=57]="A3",n[n.ASharp3=58]="ASharp3",n[n.B3=59]="B3",n[n.C4=60]="C4",n[n.CSharp4=61]="CSharp4",n[n.D4=62]="D4",n[n.DSharp4=63]="DSharp4",n[n.E4=64]="E4",n[n.F4=65]="F4",n[n.FSharp4=66]="FSharp4",n[n.G4=67]="G4",n[n.GSharp4=68]="GSharp4",n[n.A4=69]="A4",n[n.ASharp4=70]="ASharp4",n[n.B4=71]="B4",n[n.C5=72]="C5",n[n.CSharp5=73]="CSharp5",n[n.D5=74]="D5",n[n.DSharp5=75]="DSharp5",n[n.E5=76]="E5",n[n.F5=77]="F5",n[n.FSharp5=78]="FSharp5",n[n.G5=79]="G5",n[n.GSharp5=80]="GSharp5",n[n.A5=81]="A5",n[n.ASharp5=82]="ASharp5",n[n.B5=83]="B5",n[n.C6=84]="C6",n[n.CSharp6=85]="CSharp6",n[n.D6=86]="D6",n[n.DSharp6=87]="DSharp6",n[n.E6=88]="E6",n[n.F6=89]="F6",n[n.FSharp6=90]="FSharp6",n[n.G6=91]="G6",n[n.GSharp6=92]="GSharp6",n[n.A6=93]="A6",n[n.ASharp6=94]="ASharp6",n[n.B6=95]="B6",n[n.C7=96]="C7",n[n.CSharp7=97]="CSharp7",n[n.D7=98]="D7",n[n.DSharp7=99]="DSharp7",n[n.E7=100]="E7",n[n.F7=101]="F7",n[n.FSharp7=102]="FSharp7",n[n.G7=103]="G7",n[n.GSharp7=104]="GSharp7",n[n.A7=105]="A7",n[n.ASharp7=106]="ASharp7",n[n.B7=107]="B7",n[n.C8=108]="C8",n[n.CSharp8=109]="CSharp8",n[n.D8=110]="D8",n[n.DSharp8=111]="DSharp8",n[n.E8=112]="E8",n[n.F8=113]="F8",n[n.FSharp8=114]="FSharp8",n[n.G8=115]="G8",n[n.GSharp8=116]="GSharp8",n[n.A8=117]="A8",n[n.ASharp8=118]="ASharp8",n[n.B8=119]="B8",n[n.C9=120]="C9"}(o||(o={}));var f=a(11),S=a.n(f),m=function(n,e,a){null===n||void 0===n||n.addListener("noteon","all",(function(n){return null===e||void 0===e?void 0:e(n.note.number)})),null===n||void 0===n||n.addListener("noteoff","all",(function(n){return null===a||void 0===a?void 0:a(n.note.number)}))},b=a(92),v=a(93),g=a(94),C=a(95),E=a(96),F=a(97),x=a(98),A=a(3),D=a(4),G=a(41),w=a(35);function k(){var n=Object(A.a)(["\n  margin: auto 12px;\n  color: ",";\n  transition: all .3s;\n"]);return k=function(){return n},n}function j(){var n=Object(A.a)(["\n  border-color: #fff;\n  &.ant-switch-checked {\n    background-color: var(--active-note-color);\n  }\n"]);return j=function(){return n},n}function O(){var n=Object(A.a)(["\n  position: fixed;\n  // piano is vertical center of view point, switch is 20px above it\n  bottom: calc(50vh + ","px);\n  left: 0;\n  padding: 16px 0;\n  color: #fff;\n"]);return O=function(){return n},n}function y(){var n=Object(A.a)(["\n  position: absolute;\n  bottom: 0;\n  margin: 16px 10px auto;\n  pointer-events: none;\n"]);return y=function(){return n},n}function B(){var n=Object(A.a)(["\n  margin: 0 10px;\n\n  .ReactPiano__Key--natural {\n    background: var(--base-note-color);\n    border: none;\n    box-shadow: 0 0 0 1px var(--global-background);\n  }\n\n  .ReactPiano__Key--accidental {\n    height: 64%;\n    border: none;\n    background: var(--sharp-note-color);\n  }\n\n  .ReactPiano__Key--active {\n    border: none;\n    \n    &.ReactPiano__Key--natural {\n      height: unset;\n      background: var(--active-note-color);\n    }\n     \n    &.ReactPiano__Key--accidental {\n      background: var(--piano-header-background);\n    }    \n\n    &.ReactPiano__Key--natural, &.ReactPiano__Key--accidental {\n      .ReactPiano__NoteLabelContainer kbd {\n        color: var(--sharp-note-text-color);\n        text-shadow: 0 0 0 var(--sharp-note-text-color);\n        border: 1px solid var(--kbd-border-color);\n        box-shadow: 0 1.5px 0 var(--kbd-border-color);\n      }\n    }\n  }\n\n  .ReactPiano__Key {\n    border-top: 10px solid var(--piano-header-background);\n  }\n"]);return B=function(){return n},n}function P(){var n=Object(A.a)(["\n  color: transparent;\n  font-size: 12px;\n\n  ::selection {\n    background: transparent;\n  }\n"]);return P=function(){return n},n}function M(){var n=Object(A.a)(["\n  color: var(--active-note-color);\n  text-shadow: 0 0 0 var(--active-note-color);\n  border-color: var(--active-note-color);\n  box-shadow: 0 1.5px 0 var(--active-note-color);\n"]);return M=function(){return n},n}function R(){var n=Object(A.a)(['\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  height: 20px;\n  margin-top: 14px;\n  padding: 1px 5px;\n  min-width: 12px;\n  line-height: 20px;\n  text-align: center;\n  vertical-align: middle;\n  background-color: var(--kbd-background);\n  font-family: "SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace";\n  border-radius: 3px;\n  border: 1px solid var(--kbd-border-color);\n  box-shadow: 0 1.5px 0 var(--kbd-border-color);\n\n  ::selection {\n    background: transparent;\n  }\n']);return R=function(){return n},n}function L(){var n=Object(A.a)(["\n  margin-bottom: 12px;\n  text-align: center;\n  font-size: 14px;\n\n  .anticon svg {\n    font-size: 16px;\n  }\n"]);return L=function(){return n},n}function _(){var n=Object(A.a)(["\n  color: var(--base-note-text-color);\n  text-shadow: 0 0 0 var(--base-note-text-color);\n"]);return _=function(){return n},n}function N(){var n=Object(A.a)(["\n  padding-bottom: 8px;\n  color: var(--sharp-note-text-color);\n  text-shadow: 0 0 0 var(--sharp-note-text-color);\n"]);return N=function(){return n},n}function z(){var n=Object(A.a)(["\n  padding: 0 0 2px 4px;\n  text-align: left;\n  color: var(--base-note-name-color);\n  font-size: 14px;\n  user-select: none;\n\n  sub {\n    position: absolute;\n    bottom: 0;\n  }\n"]);return z=function(){return n},n}function K(){var n=Object(A.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  justify-content: center;\n  zoom: ",";\n"]);return K=function(){return n},n}function V(){var n=Object(A.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return V=function(){return n},n}var U,W,q=D.a.div(V()),H=D.a.div(K(),.8),T=D.a.div(z()),I=D.a.div(N()),J=D.a.div(_()),Q=D.a.div(L()),X=D.a.kbd(R()),Y=Object(D.a)(X)(M()),Z=D.a.span(P()),$=Object(D.a)(w.a)(B()),nn=D.a.div(y()),en=D.a.div(O(),168),an=Object(D.a)(G.a)(j()),tn=D.a.span(k(),(function(n){return n.activated?"#fff":"#999"})),rn={backspace:"\u232b",delete:"\u2326",enter:"\u21a9\ufe0e",tab:"\u21e5",escape:"Esc",up:l.a.createElement(b.a,null),down:l.a.createElement(v.a,null),right:l.a.createElement(g.a,null),left:l.a.createElement(C.a,null),home:"Home",end:"End",pageUp:"Page\u21de",pageDown:"Page\u21df",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",f13:"F13",f14:"F14",f15:"F15",f16:"F16",f17:"F17",f18:"F18",f19:"F19",f20:"F20",f21:"F21",f22:"F22",f23:"F23",f24:"F24",capsLock:"\u21ea",command:"\u2318",alt:"\u2325",rightAlt:"\u2325",control:"\u2303",leftControl:"\u2303",rightControl:"\u2303",shift:"\u21e7",rightShift:"\u21e7",space:"Space",printScreen:"Screen",insert:"Insert",menu:"Menu",audioMute:l.a.createElement(Z,null,"\ud83d\udd0a"),audioVolDown:l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,null,"\ud83d\udd0a"),"-"),audioVolUp:l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,null,"\ud83d\udd0a"),"+"),audioPlay:l.a.createElement(E.a,null),audioStop:l.a.createElement(E.a,null),audioPause:l.a.createElement(E.a,null),audioPrev:l.a.createElement(F.a,null),audioNext:l.a.createElement(x.a,null),audioRewind:"Rewind",audioForward:"Forward",audioRepeat:"\u2394",audioRandom:"Random",numpadLock:"NumLock",num1:"1",num2:"2",num3:"3",num4:"4",num5:"5",num6:"6",num7:"7",num8:"8",num9:"9",num0:"0",numpad0:"0",numpad1:"1",numpad2:"2",numpad3:"3",numpad4:"4",numpad5:"5",numpad6:"6",numpad7:"7",numpad8:"8",numpad9:"9",numpadPlus:"+",numpadSub:"-",numpadMulti:"*",numpadDiv:"/",numpadDot:".",lightsMonUp:l.a.createElement(Z,null,"\ud83d\udd06"),lightsMonDown:l.a.createElement(Z,null,"\ud83d\udd05"),lightsKbdToggle:"Toggle",lightsKbdUp:l.a.createElement(Z,null,"\u2328\ufe0f\ud83d\udd06"),lightsKbdDown:l.a.createElement(Z,null,"\u2328\ufe0f\ud83d\udd05"),a:"A",b:"B",c:"C",d:"D",e:"E",f:"F",g:"G",h:"H",i:"I",j:"J",k:"K",l:"L",m:"M",n:"N",o:"O",p:"P",q:"Q",r:"R",s:"S",t:"T",u:"U",v:"V",w:"W",x:"X",y:"Y",z:"Z",tilde:"`",dash:"-",equal:"=",comma:",",dot:".",slash:"/",semicolon:";",quotes:"'",openBracket:"[",closeBracket:"]",backslash:"\\",fn:"Fn",NULL:""},on=(a(31),function(n){var e=n.noteCode,a=o[e].replace("Sharp","#");return l.a.createElement(T,null,l.a.createElement("span",null,a))}),cn=function(n){var e=n.noteCode,a=n.portal,t=n.fnPortal,r=o[e],c=rn[a[r]],i=new Map(Object.values(t).map((function(n){return Object.entries(n)})).reduce((function(n,e){return[].concat(Object(h.a)(n),Object(h.a)(e))}),[]).filter((function(n){return Object(p.a)(n,2)[1]}))),u=rn[i.get(r)];return u?l.a.createElement(Q,null,l.a.createElement("div",null,l.a.createElement(Y,null,u)),c?l.a.createElement(X,null,c):null):c?t[r]&&Object.values(t[r]).filter(Boolean).length>0?l.a.createElement(Q,null,l.a.createElement(Y,null,c)):l.a.createElement(Q,null,l.a.createElement(X,null,c)):null},ln=function(n){var e=n.noteCode,a=n.isAccidental,t=n.portal,r=n.fnPortal,o=n.isPlayMode,c=l.a.createElement(on,{noteCode:e}),i=a?I:J;return l.a.createElement(i,null,!o&&l.a.createElement(cn,{noteCode:e,portal:t,fnPortal:r}),a?null:c)},un=a(40).a.Flow,pn=un.Formatter,hn=un.Renderer,dn=un.Stave,sn=un.StaveNote,fn=un.Beam;!function(n){n[n.CANVAS=1]="CANVAS",n[n.RAPHAEL=2]="RAPHAEL",n[n.SVG=3]="SVG",n[n.VML=4]="VML"}(U||(U={})),function(n){n.treble="treble",n.bass="bass"}(W||(W={}));var Sn=function(n){return o[n].replace(/(Sharp)?(\d)/,"/$2")},mn=function(n,e){return Array.from({length:e-n+1}).map((function(e,a){return a+n})).filter((function(n){return!o[n].includes("Sharp")})).map((function(n){return new sn({clef:n<o.C4?W.bass:W.treble,keys:[Sn(n)],duration:"4q"})}))},bn=function(n){var e=n.className,a=n.width,t=n.noteRange,r=t.first,i=t.last,u=n.noteKeyWidth,p=Object(c.useRef)(),h=mn(o.C4,i),d=mn(r,o.B3);Object(c.useEffect)((function(){var n=new hn(p.current,U.SVG);s(n)}),[]);var s=function(n){n.resize(a,140);var e=n.getContext(),t=new dn(0,20,d.length*u).addClef(W.bass).setContext(e);t.draw();var r=fn.generateBeams(d);pn.FormatAndDraw(e,t,d),r.forEach((function(n){return n.setContext(e).draw()}));var o=new dn(d.length*u,20,h.length*u).addClef(W.treble).setContext(e);o.draw();var c=fn.generateBeams(h);pn.FormatAndDraw(e,o,h),c.forEach((function(n){return n.setContext(e).draw()}))};return l.a.createElement(nn,null,l.a.createElement("div",{className:e,ref:p}))},vn=a(39),gn=a.n(vn),Cn=(a(86),a(87),a(88),gn.a),En=Cn.playMode,Fn=Cn.portal,xn=Cn.fnPortal,An=new Set(En.toggle.map((function(n){return o[n]}))),Dn=Object.keys(Fn).map((function(n){return o[n]})),Gn={first:Math.min.apply(Math,Object(h.a)(Dn)),last:Math.max.apply(Math,Object(h.a)(Dn))},wn=70*function(n,e){for(var a=0,t=n;t<=e;t++)o[t].includes("Sharp")||(a+=1);return a}(Gn.first,Gn.last),kn=function(){},jn=function(n){return l.a.createElement(en,null,l.a.createElement(tn,{activated:!n.checked},"Control Mode"),l.a.createElement(an,n),l.a.createElement(tn,{activated:n.checked},"Play Mode"))},On=document.getElementById("root");u.a.render(l.a.createElement((function(){var n=Object(c.useRef)(En.enable),e=Object(c.useState)(new Set),a=Object(p.a)(e,2),t=a[0],r=a[1];Object(c.useEffect)((function(){!function(n){var e=new Set,a=function(a){e.add(a),n(e,!0)},t=function(a){e.delete(a),n(e,!1)},r=function(){return S.a.inputs[0]},o=function(n){console.log("WebMidi: connected()","event",n),"input"===n.port.type&&m(r(),a,t)},c=function(n){if(console.log("WebMidi: disconnected()","event",n),"input"===n.port.type){var e=r();null===e||void 0===e||e.removeListener("noteon"),null===e||void 0===e||e.removeListener("noteoff")}};S.a.enable((function(n){if(n)console.log("WebMidi could not be enabled.",n);else{var e=r();e?(console.log("WebMidi enabled."),m(e,a,t)):(console.log("WebMidi midi input not found"),S.a.addListener("connected",o)),S.a.addListener("disconnected",c)}}))}((function(e,a){var t,o;a&&(o=An,(t=e).size===o.size&&t.size===new Set([].concat(Object(h.a)(t),Object(h.a)(o))).size)&&(n.current=!n.current),r(new Set(Object(h.a)(e)))}))}),[]);var o=Object(c.useCallback)((function(e){var a=e.midiNumber,t=e.isAccidental;return l.a.createElement(ln,{noteCode:a,isAccidental:t,portal:Fn,fnPortal:xn,isPlayMode:n.current})}),[n.current]);return l.a.createElement(q,null,l.a.createElement(s.a,{url:"https://github.com/zthxxx/midk",backgroundColor:"white",color:"var(--global-background)",svgStyle:{position:"fixed"}}),l.a.createElement(jn,{checked:n.current,onChange:function(e){n.current=e,r(new Set)}}),l.a.createElement(H,null,l.a.createElement($,{noteRange:Gn,width:wn,activeNotes:Object(h.a)(t),playNote:kn,stopNote:kn,disabled:!1,keyWidthToHeight:1/6,renderNoteLabel:o}),n.current&&l.a.createElement(bn,{width:wn,noteRange:Gn,noteKeyWidth:70})))})),On)}},[[42,1,2]]]);
//# sourceMappingURL=main.9f89fd2d.chunk.js.map