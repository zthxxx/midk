{"version":3,"sources":["portal.yml","midi.ts","PianoSheet/styled.ts","PianoSheet/keySheet.tsx","PianoSheet/PianoSheet.tsx","PianoSheet/Score.tsx","PianoSheet/PianoApp.tsx","index.web.ts"],"names":["module","exports","MessageStatus","NoteCode","Background","styled","div","BodyContainer","NoteName","KeyName","Kbd","kbd","FnKbd","EmojiIcon","span","Piano","ReactPiano","StaveContainer","KeyDisplay","backspace","delete","enter","tab","escape","up","ArrowUpOutlined","down","ArrowDownOutlined","right","ArrowRightOutlined","left","ArrowLeftOutlined","home","end","pageUp","pageDown","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","f13","f14","f15","f16","f17","f18","f19","f20","f21","f22","f23","f24","capsLock","command","alt","rightAlt","control","leftControl","rightControl","shift","rightShift","space","printScreen","insert","menu","audioMute","role","audioVolDown","audioVolUp","audioPlay","StepForwardOutlined","audioStop","audioPause","audioPrev","BackwardOutlined","audioNext","ForwardOutlined","audioRewind","audioForward","audioRepeat","audioRandom","numpadLock","num1","num2","num3","num4","num5","num6","num7","num8","num9","num0","numpad0","numpad1","numpad2","numpad3","numpad4","numpad5","numpad6","numpad7","numpad8","numpad9","numpadPlus","numpadSub","numpadMulti","numpadDiv","numpadDot","lightsMonUp","lightsMonDown","lightsKbdToggle","lightsKbdUp","lightsKbdDown","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","tilde","dash","equal","comma","dot","slash","semicolon","quotes","openBracket","closeBracket","backslash","fn","NULL","Backends","Clef","NoteLabel","props","noteCode","noteName","replace","SharpNote","BaseNote","NamedKeyLabel","portal","fnPortal","note","key","alterKeyMap","Map","Object","values","map","entries","reduce","prev","curr","filter","alterKey","get","Boolean","length","NoteKey","isAccidental","noteLabel","NoteWrapper","Vex","Flow","Formatter","Renderer","Stave","StaveNote","Beam","transformToVexNote","genVexNotes","start","Array","from","_","index","includes","clef","C4","bass","treble","keys","duration","Score","className","width","noteRange","first","last","noteKeyWidth","container","useRef","trebleNotes","bassNotes","B3","useEffect","renderer","current","SVG","render","resize","context","getContext","bassStave","addClef","setContext","draw","bassBeams","generateBeams","FormatAndDraw","forEach","beam","trebleStave","trebleBeams","ref","portalConfig","C2","C7","notesWholeWidth","count","code","countNotesWithoutChromatic","rootElement","document","getElementById","ReactDOM","React","createElement","url","process","backgroundColor","color","svgStyle","position","playNote","playProps","console","log","stopNote","disabled","keyWidthToHeight","renderNoteLabel","midiNumber"],"mappings":"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","file":"static/js/main.af1ca96d.chunk.js","sourcesContent":["module.exports = {\"pitchNotation\":\"Scientific\",\"playMode\":{\"enable\":false,\"toggle\":[\"CSharp2\",\"DSharp2\",\"ASharp5\"]},\"portal\":{\"C2\":null,\"CSharp2\":\"escape\",\"D2\":\"home\",\"DSharp2\":null,\"E2\":\"end\",\"F2\":\"tilde\",\"FSharp2\":\"tab\",\"G2\":\"control\",\"GSharp2\":\"capsLock\",\"A2\":\"alt\",\"ASharp2\":\"shift\",\"B2\":\"command\",\"C3\":\"a\",\"CSharp3\":\"q\",\"D3\":\"z\",\"DSharp3\":\"w\",\"E3\":\"s\",\"F3\":\"x\",\"FSharp3\":\"e\",\"G3\":\"c\",\"GSharp3\":\"d\",\"A3\":\"f\",\"ASharp3\":\"r\",\"B3\":\"v\",\"C4\":\"space\",\"CSharp4\":\"t\",\"D4\":\"b\",\"DSharp4\":\"g\",\"E4\":\"h\",\"F4\":\"n\",\"FSharp4\":\"y\",\"G4\":\"j\",\"GSharp4\":\"u\",\"A4\":\"k\",\"ASharp4\":\"i\",\"B4\":\"m\",\"C5\":\"l\",\"CSharp5\":\"o\",\"D5\":\"comma\",\"DSharp5\":\"p\",\"E5\":\"dot\",\"F5\":\"slash\",\"FSharp5\":\"openBracket\",\"G5\":\"semicolon\",\"GSharp5\":\"closeBracket\",\"A5\":\"quotes\",\"ASharp5\":\"enter\",\"B5\":\"backslash\",\"C6\":\"left\",\"CSharp6\":\"backspace\",\"D6\":\"down\",\"DSharp6\":\"up\",\"E6\":\"right\",\"F6\":\"delete\",\"FSharp6\":\"backspace\",\"G6\":\"audioVolDown\",\"GSharp6\":\"audioVolUp\",\"A6\":\"lightsMonDown\",\"ASharp6\":\"lightsMonUp\",\"B6\":\"dash\",\"C7\":\"equal\"},\"fnPortal\":{\"C2\":{\"D2\":\"audioPrev\",\"DSharp2\":\"audioPlay\",\"E2\":\"audioNext\",\"CSharp3\":\"f1\",\"D3\":\"f2\",\"DSharp3\":\"f3\",\"E3\":\"f4\",\"F3\":\"f5\",\"FSharp3\":\"f6\",\"G3\":\"f7\",\"GSharp3\":\"f8\",\"A3\":\"f9\",\"ASharp3\":\"f10\",\"B3\":\"f11\",\"C4\":\"f12\",\"C6\":\"tilde\",\"CSharp6\":\"num1\",\"D6\":\"num2\",\"DSharp6\":\"num3\",\"E6\":\"num4\",\"F6\":\"num5\",\"FSharp6\":\"num6\",\"G6\":\"num7\",\"GSharp6\":\"num8\",\"A6\":\"num9\",\"ASharp6\":\"num0\",\"B6\":\"pageDown\",\"C7\":\"pageUp\"},\"CSharp2\":{\"ASharp5\":null}}}","// https://www.midi.org/specifications/item/table-1-summary-of-midi-message\nexport enum MessageStatus {\n  noteOffEvent = 0b1000 << 4,\n  noteOnEvent = 0b1001 << 4,\n  polyphonicPressure = 0b1010 << 4,\n  controlChange = 0b1011 << 4,\n  programChange = 0b1100 << 4,\n  channelPressure = 0b1101 << 4,\n  pitchBendChange = 0b1110 << 4,\n}\n\nexport type MessageData = number\n\nexport type Message = [\n  MessageStatus,\n  MessageData,\n  MessageData,\n]\n\n// Scientific pitch notation\n// https://en.wikipedia.org/wiki/Scientific_pitch_notation\n// 88 keys: [A0 ... C8]\n// 61 keys: [C2 ... C7]\nexport enum NoteCode {\n  C0 = 12,\n  CSharp0,\n  D0,\n  DSharp0,\n  E0,\n  F0,\n  FSharp0,\n  G0,\n  GSharp0,\n  A0,\n  ASharp0,\n  B0,\n\n  C1,\n  CSharp1,\n  D1,\n  DSharp1,\n  E1,\n  F1,\n  FSharp1,\n  G1,\n  GSharp1,\n  A1,\n  ASharp1,\n  B1,\n\n  C2,\n  CSharp2,\n  D2,\n  DSharp2,\n  E2,\n  F2,\n  FSharp2,\n  G2,\n  GSharp2,\n  A2,\n  ASharp2,\n  B2,\n\n  C3,\n  CSharp3,\n  D3,\n  DSharp3,\n  E3,\n  F3,\n  FSharp3,\n  G3,\n  GSharp3,\n  A3,\n  ASharp3,\n  B3,\n\n  C4,\n  CSharp4,\n  D4,\n  DSharp4,\n  E4,\n  F4,\n  FSharp4,\n  G4,\n  GSharp4,\n  A4,\n  ASharp4,\n  B4,\n\n  C5,\n  CSharp5,\n  D5,\n  DSharp5,\n  E5,\n  F5,\n  FSharp5,\n  G5,\n  GSharp5,\n  A5,\n  ASharp5,\n  B5,\n\n  C6,\n  CSharp6,\n  D6,\n  DSharp6,\n  E6,\n  F6,\n  FSharp6,\n  G6,\n  GSharp6,\n  A6,\n  ASharp6,\n  B6,\n\n  C7,\n  CSharp7,\n  D7,\n  DSharp7,\n  E7,\n  F7,\n  FSharp7,\n  G7,\n  GSharp7,\n  A7,\n  ASharp7,\n  B7,\n\n  C8,\n  CSharp8,\n  D8,\n  DSharp8,\n  E8,\n  F8,\n  FSharp8,\n  G8,\n  GSharp8,\n  A8,\n  ASharp8,\n  B8,\n\n  C9,\n}\n\nexport type NoteNameKey = (keyof typeof NoteCode)\n\nexport type NoteVelocity = number\n\nexport type NoteEvent = Extract<\n  MessageStatus,\n  typeof MessageStatus.noteOnEvent | typeof MessageStatus.noteOffEvent\n>\n\nexport type NoteMessage = [\n  NoteEvent,\n  NoteCode,\n  NoteVelocity,\n]\n\nexport type Timestamp = number\n","import styled from '@emotion/styled'\nimport { Piano as ReactPiano } from 'react-piano'\n\n\nexport const Background = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\n\nexport const BodyContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  justify-content: center;\n`\n\nexport const NoteName = styled.div`\n  padding: 0 0 2px 4px;\n  text-align: left;\n  color: var(--base-note-name-color);\n  font-size: 14px;\n  user-select: none;\n\n  sub {\n    position: absolute;\n    bottom: 0;\n  }\n`\n\nexport const KeyName = styled.div`\n  margin-bottom: 12px;\n  text-align: center;\n  font-size: 14px;\n  user-select: none;\n\n  .anticon svg {\n    font-size: 16px;\n  }\n`\n\nexport const Kbd = styled.kbd`\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  height: 20px;\n  margin-top: 14px;\n  padding: 1px 5px;\n  min-width: 12px;\n  line-height: 20px;\n  text-align: center;\n  vertical-align: middle;\n  background-color: var(--kbd-background);\n  font-family: \"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace\";\n  border-radius: 3px;\n  border: 1px solid var(--kbd-border-color);\n  box-shadow: 0 1.5px 0 var(--kbd-border-color);\n`\n\nexport const FnKbd = styled(Kbd)`\n  color: var(--active-note-color);\n  text-shadow: 0 0 0 var(--active-note-color);\n  border-color: var(--active-note-color);\n  box-shadow: 0 1.5px 0 var(--active-note-color);\n`\n\nexport const EmojiIcon = styled.span`\n  color: transparent;\n  width: 14px;\n  overflow-x: hidden;\n`\n\nexport const Piano = styled(ReactPiano)`\n  margin: 0 10px;\n\n  .ReactPiano__Key--natural {\n    background: var(--base-note-color);\n    border: none;\n    box-shadow: 0 0 0 1px var(--global-background);\n  }\n\n  .ReactPiano__Key--accidental {\n    height: 64%;\n    border: none;\n    background: var(--sharp-note-color);\n  }\n\n  .ReactPiano__Key--active {\n    border: none;\n    background: var(--active-note-color);\n\n    &.ReactPiano__Key--natural {\n      height: unset;\n    }\n\n    &.ReactPiano__Key--natural, &.ReactPiano__Key--accidental {\n      .ReactPiano__NoteLabelContainer kbd {\n        color: var(--sharp-note-text-color);\n        text-shadow: 0 0 0 var(--sharp-note-text-color);\n        border: 1px solid var(--kbd-border-color);\n        box-shadow: 0 1.5px 0 var(--kbd-border-color);\n      }\n    }\n  }\n\n  .ReactPiano__Key {\n    border-top: 10px solid var(--piano-header-background);\n  }\n`\n\nexport const StaveContainer = styled.div`\n  margin: 16px 10px auto;\n  background-color: #fff;\n`\n","import React from 'react'\nimport {\n  ArrowUpOutlined,\n  ArrowDownOutlined,\n  ArrowLeftOutlined,\n  ArrowRightOutlined,\n  StepForwardOutlined,\n  ForwardOutlined,\n  BackwardOutlined,\n} from '@ant-design/icons'\nimport { NamedKey } from '../keyboard'\nimport * as S from './styled'\n\n\nexport const KeyDisplay: Record<keyof typeof NamedKey, React.ReactNode> = {\n  backspace: '⌫',\n  delete: '⌦',\n  enter: '↩︎',\n  tab: '⇥',\n  escape: 'Esc',\n  up: <ArrowUpOutlined />,\n  down: <ArrowDownOutlined />,\n  right: <ArrowRightOutlined />,\n  left: <ArrowLeftOutlined />,\n  home: 'Home',\n  end: 'End',\n  pageUp: 'Page⇞',\n  pageDown: 'Page⇟',\n\n  f1: 'F1',\n  f2: 'F2',\n  f3: 'F3',\n  f4: 'F4',\n  f5: 'F5',\n  f6: 'F6',\n  f7: 'F7',\n  f8: 'F8',\n  f9: 'F9',\n  f10: 'F10',\n  f11: 'F11',\n  f12: 'F12',\n  f13: 'F13',\n  f14: 'F14',\n  f15: 'F15',\n  f16: 'F16',\n  f17: 'F17',\n  f18: 'F18',\n  f19: 'F19',\n  f20: 'F20',\n  f21: 'F21',\n  f22: 'F22',\n  f23: 'F23',\n  f24: 'F24',\n\n  capsLock: '⇪',\n  command: '⌘',\n  alt: '⌥',\n  rightAlt: '⌥',\n  control: '⌃',\n  leftControl: '⌃',\n  rightControl: '⌃',\n  shift: '⇧',\n  rightShift: '⇧',\n  space: 'Space',\n  printScreen: 'Screen',\n  insert: 'Insert',\n  menu: 'Menu',\n\n  audioMute: <S.EmojiIcon role=\"img\">🔊</S.EmojiIcon>,\n  audioVolDown: <><S.EmojiIcon role=\"img\">🔊</S.EmojiIcon>-</>,\n  audioVolUp: <><S.EmojiIcon role=\"img\">🔊</S.EmojiIcon>+</>,\n  audioPlay: <StepForwardOutlined />,\n  audioStop: <StepForwardOutlined />,\n  audioPause: <StepForwardOutlined />,\n  audioPrev: <BackwardOutlined />,\n  audioNext: <ForwardOutlined />,\n  audioRewind: 'Rewind',\n  audioForward: 'Forward',\n  audioRepeat: '⎔',\n  audioRandom: 'Random',\n  numpadLock: 'NumLock',\n\n  num1: '1',\n  num2: '2',\n  num3: '3',\n  num4: '4',\n  num5: '5',\n  num6: '6',\n  num7: '7',\n  num8: '8',\n  num9: '9',\n  num0: '0',\n\n  numpad0: '0',\n  numpad1: '1',\n  numpad2: '2',\n  numpad3: '3',\n  numpad4: '4',\n  numpad5: '5',\n  numpad6: '6',\n  numpad7: '7',\n  numpad8: '8',\n  numpad9: '9',\n  numpadPlus: '+',\n  numpadSub: '-',\n  numpadMulti: '*',\n  numpadDiv: '/',\n  numpadDot: '.',\n  lightsMonUp: <S.EmojiIcon role=\"img\">🔆</S.EmojiIcon>,\n  lightsMonDown: <S.EmojiIcon role=\"img\">🔅</S.EmojiIcon>,\n  lightsKbdToggle: 'Toggle',\n  lightsKbdUp: <S.EmojiIcon role=\"img\">⌨️🔆</S.EmojiIcon>,\n  lightsKbdDown: <S.EmojiIcon role=\"img\">⌨️🔅</S.EmojiIcon>,\n\n  a: 'A',\n  b: 'B',\n  c: 'C',\n  d: 'D',\n  e: 'E',\n  f: 'F',\n  g: 'G',\n  h: 'H',\n  i: 'I',\n  j: 'J',\n  k: 'K',\n  l: 'L',\n  m: 'M',\n  n: 'N',\n  o: 'O',\n  p: 'P',\n  q: 'Q',\n  r: 'R',\n  s: 'S',\n  t: 'T',\n  u: 'U',\n  v: 'V',\n  w: 'W',\n  x: 'X',\n  y: 'Y',\n  z: 'Z',\n\n  tilde: '`',\n\n  dash: '-',\n  equal: '=',\n\n  comma: ',',\n  dot: '.',\n  slash: '/',\n\n  semicolon: ';',\n  quotes: '\\'',\n\n  openBracket: '[',\n  closeBracket: ']',\n  backslash: '\\\\',\n\n  fn: 'Fn',\n  NULL: '',\n}\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { NoteCode } from '../midi'\nimport { PortalMap, FnPortalMaps } from '../portal'\nimport { KeyDisplay } from './keySheet'\nimport * as S from './styled'\nimport 'react-piano/dist/styles.css'\n\n\nexport const countNotesWithoutChromatic = (start: NoteCode, end: NoteCode): number => {\n  let count = 0\n  for (let code = start; code <= end; code++) {\n    if (!NoteCode[code].includes('Sharp')) {\n      count += 1\n    }\n  }\n  return count\n}\n\nexport const NoteLabel = (props: {\n  noteCode: NoteCode,\n}) => {\n  const { noteCode } = props\n\n  const noteName = NoteCode[noteCode].replace('Sharp', '#')\n\n  return (\n    <S.NoteName>\n      <span>\n        {noteName}\n      </span>\n    </S.NoteName>\n  )\n}\n\nexport const SharpNote = styled.div`\n  padding-bottom: 8px;\n  color: var(--sharp-note-text-color);\n  text-shadow: 0 0 0 var(--sharp-note-text-color);\n`\n\nexport const BaseNote = styled.div`\n  color: var(--base-note-text-color);\n  text-shadow: 0 0 0 var(--base-note-text-color);\n`\n\nexport const NamedKeyLabel = (props: {\n  noteCode: NoteCode,\n  portal: PortalMap,\n  fnPortal: FnPortalMaps,\n}) => {\n  const { noteCode, portal, fnPortal } = props\n  const note = NoteCode[noteCode]\n  const key = KeyDisplay[portal[note]]\n  const alterKeyMap = new Map(\n    Object.values(fnPortal)\n      .map(portal => Object.entries(portal))\n      .reduce((prev, curr) => [...prev, ...curr], [])\n      .filter(([, key]) => key),\n  )\n\n  const alterKey = KeyDisplay[alterKeyMap.get(note)]\n\n  if (alterKey) {\n    return (\n      <S.KeyName>\n        <div>\n          <S.FnKbd>{alterKey}</S.FnKbd>\n        </div>\n        {key\n          ? <S.Kbd>{key}</S.Kbd>\n          : null\n        }\n      </S.KeyName>\n    )\n  }\n\n  if (!key) return null\n\n  if (fnPortal[note] && Object.values(fnPortal[note]).filter(Boolean).length > 0) {\n    return (\n      <S.KeyName>\n        <S.FnKbd>{key}</S.FnKbd>\n      </S.KeyName>\n    )\n  }\n\n\n  return (\n    <S.KeyName>\n      <S.Kbd>{key}</S.Kbd>\n    </S.KeyName>\n  )\n}\n\nexport const NoteKey = (props: {\n  noteCode: NoteCode,\n  isAccidental: boolean,\n  portal: PortalMap,\n  fnPortal: FnPortalMaps,\n}) => {\n  const { noteCode, isAccidental, portal, fnPortal } = props\n\n  const noteLabel = <NoteLabel noteCode={noteCode} />\n  const NoteWrapper = isAccidental ? SharpNote : BaseNote\n\n  return (\n    <NoteWrapper>\n      <NamedKeyLabel\n        noteCode={noteCode}\n        portal={portal}\n        fnPortal={fnPortal}\n      />\n      {isAccidental ? null : noteLabel}\n    </NoteWrapper>\n  )\n}\n","// https://github.com/0xfe/vexflow/wiki/The-VexFlow-Tutorial\n// http://public.vexflow.com/build/docs/\n\nimport React, { useEffect, useRef } from 'react'\nimport Vex, { Flow } from 'vexflow'\nimport { NoteCode } from '../midi'\nimport * as S from './styled'\n\nconst { Formatter, Renderer, Stave, StaveNote, Beam } = Vex.Flow\n\n// Cannot access ambient const enums when the '--isolatedModules' flag is provided\n// https://github.com/0xfe/vexflow/issues/749\n// https://github.com/0xfe/vexflow/blob/1.2.93/src/renderer.js#L14\n// https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/vexflow/index.d.ts#L797\nenum Backends {\n  CANVAS = 1,\n  RAPHAEL,\n  SVG,\n  VML,\n}\n\nexport enum Clef {\n  treble = 'treble',\n  bass = 'bass',\n}\n\nexport interface ScoreProps {\n  className?: string,\n  width?: number,\n  noteRange: {\n    first: NoteCode,\n    last: NoteCode,\n  },\n  noteKeyWidth: number,\n\n  [key: string]: any,\n}\n\nexport const transformToVexNote = (noteCode: NoteCode): string => {\n  const noteName = NoteCode[noteCode]\n\n  /**\n   * CSharp4  -> C/4\n   * D3       -> D/3\n   */\n  return noteName.replace(/(Sharp)?(\\d)/, '/$2')\n}\n\nexport const genVexNotes = (start: NoteCode, end: NoteCode): Flow.StaveNote[] =>\n  Array.from({ length: end - start + 1 })\n    .map((_, index) => index + start)\n    .filter((noteCode: NoteCode) => !NoteCode[noteCode].includes('Sharp'))\n    .map((noteCode: NoteCode) =>\n      new StaveNote({\n        clef: noteCode < NoteCode.C4 ? Clef.bass : Clef.treble,\n        keys: [transformToVexNote(noteCode)],\n        duration: '4q',\n      }),\n    )\n\nexport const Score = (props: ScoreProps) => {\n  const {\n    className,\n    width,\n    noteRange: {\n      first,\n      last,\n    },\n    noteKeyWidth,\n  } = props\n\n  const container = useRef<HTMLObjectElement>()\n\n  const trebleNotes: Flow.StaveNote[] = genVexNotes(NoteCode.C4, last)\n  const bassNotes: Flow.StaveNote[] = genVexNotes(first, NoteCode.B3)\n\n  useEffect(() => {\n    const renderer = new Renderer(\n      container.current,\n      Backends.SVG as any as Flow.Renderer.Backends,\n    )\n    render(renderer)\n  }, [])\n\n  const render = (renderer: Flow.Renderer) => {\n    renderer.resize(width, 150)\n    const context = renderer.getContext()\n\n    const bassStave = new Stave(10, 20, bassNotes.length * noteKeyWidth - 10)\n      .addClef(Clef.bass)\n      .setContext(context)\n    bassStave.draw()\n\n    const bassBeams = Beam.generateBeams(bassNotes)\n    Formatter.FormatAndDraw(context, bassStave, bassNotes)\n    bassBeams.forEach(beam => beam.setContext(context).draw())\n\n    const trebleStave = new Stave(\n      bassNotes.length * noteKeyWidth + 10,\n      20,\n      trebleNotes.length * noteKeyWidth - 10,\n    )\n      .addClef(Clef.treble)\n      .setContext(context)\n    trebleStave.draw()\n\n    const trebleBeams = Beam.generateBeams(trebleNotes)\n    Formatter.FormatAndDraw(context, trebleStave, trebleNotes)\n    trebleBeams.forEach(beam => beam.setContext(context).draw())\n  }\n\n  return (\n    <S.StaveContainer>\n      <div\n        className={className}\n        ref={container}\n      />\n    </S.StaveContainer>\n  )\n}\n","// https://github.com/kevinsqi/react-piano\n// https://github.com/lillydinhle/react-piano-component\n\nimport React from 'react'\nimport GithubCorner from 'react-github-corners'\nimport { PortalMap, FnPortalMaps } from '../portal'\nimport { NoteCode } from '../midi'\nimport { NoteKey, countNotesWithoutChromatic } from './PianoSheet'\nimport { ScoreProps, Score } from './Score'\nimport * as S from './styled'\n\nimport portalConfig from '../portal.yml'\nimport 'react-piano/dist/styles.css'\nimport 'react-github-corners/dist/GithubCorner.css'\nimport './index.css'\n\n\nexport const noteKeyWidth = 70\nexport const noteKeyWidthHeightRatio = 1 / 4.8\n\nconst { portal, fnPortal } = portalConfig as {\n  portal: PortalMap,\n  fnPortal: FnPortalMaps,\n}\n\nexport const noteRange: ScoreProps['noteRange'] = {\n  first: NoteCode.C2,\n  last: NoteCode.C7,\n}\n\nconst notesWholeWidth = countNotesWithoutChromatic(noteRange.first, noteRange.last) * noteKeyWidth\n\nexport const App = () => (\n  <S.Background>\n    <GithubCorner\n      url={process.env.REACT_APP_PROJECT_REPO}\n      backgroundColor={`white`}\n      color={`var(--global-background)`}\n      svgStyle={{\n        position: 'fixed',\n      }}\n    />\n    <S.BodyContainer>\n      <S.Piano\n        noteRange={noteRange}\n        width={notesWholeWidth}\n        playNote={(...playProps) => console.log('[Piano] playProps', playProps)}\n        stopNote={(...playProps) => console.log('[Piano] stopNote', playProps)}\n        disabled={false}\n        keyWidthToHeight={noteKeyWidthHeightRatio}\n        renderNoteLabel={({ midiNumber, isAccidental }) => {\n          return (\n            <NoteKey\n              noteCode={midiNumber}\n              isAccidental={isAccidental}\n              portal={portal}\n              fnPortal={fnPortal}\n            />\n          )\n        }}\n      />\n\n      <Score\n        width={notesWholeWidth}\n        noteRange={noteRange}\n        noteKeyWidth={noteKeyWidth}\n      />\n    </S.BodyContainer>\n  </S.Background>\n)\n\n\n\n\n","/**\n * `index.web.ts` is in front of `index.ts`\n *\n * due to extension order in `moduleFileExtensions`\n *\n * https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/config/paths.js#L32\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { App } from './PianoSheet'\n\n\nconst rootElement = document.getElementById('root')\nReactDOM.render(\n  React.createElement(App),\n  rootElement,\n)\n\n\n"],"sourceRoot":""}